var files = require('files');
var _ = require('lodash');

module.exports = {

  // for getting file stubs
  files: files,

  /**
   * Get a random number between a minimum and maximum
   *
   * @param min
   * @param max
   * @returns {number}
   */
  random: function ( min, max ) {
    return Math.floor(Math.random() * (max - min) + min);
  },

  /**
   * Add tag ensures that a tag exists on the character.
   *
   * @param string
   * @returns {obj} - character, adventure, or encounter, or anything else that initTags
   */
  addTag: function( string ){
    if ( ! this.hasTag(string ) ) {
      this.tags.push( string );
    }

    // chaining
    return this;
  },

  /**
   * Test if the tag exists on the character
   *
   * @param string
   * @returns {boolean}
   */
  hasTag: function( string ){
    return ( this.tags.indexOf( string ) !== -1 );
  },

  /**
   * Remove a tag from the object.
   *
   * @param string
   * @returns {Object} - character, adventure, or encounter, or anything else that initTags
   */
  removeTag: function( string ) {
    if ( this.hasTag( string ) ){
      var index = this.tags.indexOf( string );
      this.tags.splice( index, 1 );
    }

    // chaining
    return this;
  },

  /**
   * Output the tags on the object
   *
   * @returns {Object} - character, adventure, or encounter, or anything else that initTags
   */
  showTags: function(){
    _.forEach( this.tags, function( value ){
      console.log( value );
    });

    return this;
  },

  /**
   * Attach Tagging methods to an object, and ensure the tags array exists
   *
   * @param {Object} - character, adventure, or encounter, or anything else that initTags
   * @returns void
   */
  initTags: function( obj ){
    if ( ! obj.tags ){
      obj.tags = [];
    }

    obj.hasTag = this.hasTag;
    obj.addTag = this.addTag;
    obj.removeTag = this.removeTag;
    obj.showTags = this.showTags;
  }
};
